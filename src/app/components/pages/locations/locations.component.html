<div class="locations-container">
  <ion-header>
    <ion-toolbar class="header">
      <ion-buttons slot="start">
        <ion-menu-button style="color: black;"></ion-menu-button>
      </ion-buttons>
      <ion-title>Locations Near You</ion-title>
    </ion-toolbar>
  </ion-header>
  
  
  <ion-content [fullscreen]="true" *ngIf="user">
    <agm-map 
    [zoom]="zoom" 
    [latitude]="user.location.latitude"
    [longitude]="user.location.longitude">
      <agm-marker *ngFor="let buisness of buisnesses" 
      [latitude]="buisness.location.latitude"
      [longitude]="buisness.location.longitude"
      [markerClickable]="true"
      (markerClick)="openBuisnessDialog(buisness)"
      ></agm-marker>
      <!-- <agm-overlay
      *ngFor="let buisness of buisnesses"
      [latitude]="buisness.location.latitude"
      [longitude]="buisness.location.longitude"
      (click)="openBuisnessDialog(buisness)"
    >
      <div class="customMarker" (click)="openBuisnessDialog(buisness)">
        <img [src]="buisness.photoURL" alt="Image" />
      </div>
    </agm-overlay> -->

    </agm-map>
  </ion-content>

  <ion-bottom-sheet title="Buisnesses Near You" dockedHeight="100px" state="defaultSheetState" disableDrag="false" >
    <ion-list>
      <ion-item *ngFor="let buisness of buisnesses" (click)="openBuisnessDialog(buisness)">
        <ion-thumbnail slot="start">
          <img src={{buisness.photoURL}}>
        </ion-thumbnail>
        <ion-label>
          <h3>{{buisness.name}}</h3>
          <p>{{getLocation(buisness.location)}}</p>
          <p>{{getSubLocation(buisness.location)}}</p>
        </ion-label>
      </ion-item>
  
      <div class="no-buisnesses" [hidden]="buisnesses.length != 0 || loading" style="text-align: center; margin-top: 2rem;">
        <h2>No Buisnesses Found!</h2>
        <p style="font-size: 1rem;">Please check another time to find more buisnesses near you.</p>
      </div>
    </ion-list>
  </ion-bottom-sheet>
</div>


